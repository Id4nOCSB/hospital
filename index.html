<!DOCTYPE html>
<html>
<head>
    <title>Ontario Hospital Resources</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Basic CSS styling */
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background-color: #ffffff; /* Default light mode background */
            color: #000000; /* Default light mode text color */
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark-mode {
            background-color: #121212; /* Dark mode background */
            color: #ffffff; /* Dark mode text color */
        }

        h1 {
            text-align: center;
            margin: 20px 0;
        }

        #controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        #controls select,
        #controls input {
            padding: 10px;
            border: 1px solid #ffffff;
            border-radius: 5px;
            font-size: 1em;
            margin: 5px;
        }

        #controls select {
            width: 250px;
        }

        #controls input {
            width: 300px;
        }

        #map {
            height: 520px;
            width: 100%;
        }

        .hospital-card {
            border: 1px solid #cccccc;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
            background-color: #ffffff; /* Default light mode card background */
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .hospital-card:hover {
            background-color: #f0f0f0; /* Slightly lighter background on hover */
        }

        body.dark-mode .hospital-card {
            background-color: #1e1e1e; /* Match dark mode background */
            border-color: #333333; /* Dark mode border color */
        }

        body.dark-mode .hospital-card:hover {
            background-color: #2a2a2a; /* Slightly lighter background on hover in dark mode */
        }

        #hospital-list {
            max-width: 800px;
            margin: 0 auto;
        }

        .no-results {
            text-align: center;
            padding: 20px;
            font-size: 1.2em;
            color: #555;
        }

        @media (max-width: 600px) {
            #controls {
                flex-direction: column;
                align-items: stretch;
            }

            #controls select,
            #controls input {
                width: 100%;
                max-width: 300px;
            }
        }

        /* Style for the modal */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(255, 255, 255, 0.4); /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #000000;
            margin: 10% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 90%; /* Could be more or less, depending on screen size */
            max-width: 600px;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
          from {opacity: 0;}
          to {opacity: 1;}
        }

        /* The Close Button */
        .close {
            color: #000000;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 15px;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: #ffffff;
            text-decoration: none;
        }

        .modal-equipment-list {
            list-style-type: none;
            padding: 0;
            margin-bottom: 15px;
        }

        .modal-equipment-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .modal-equipment-list li:last-child {
            border-bottom: none;
        }
        .modal-procedure-list {
            list-style-type: none;
            padding: 0;
            margin-bottom: 15px;
        }

        .modal-procedure-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .modal-procedure-list li:last-child {
            border-bottom: none;
           
        }
        

        .modal-map-container {
            height: 300px;
            width: 100%;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .modal-contact-info {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .modal-website-link {
            font-weight: bold;
            margin-top: 10px;
        }

        /* Chatbot styling */
        #chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            height: 400px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: none;
        }

        #chatbot-header {
            background-color: #007bff;
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 18px;
        }

        #chatbot-messages {
            padding: 10px;
            height: 250px;
            overflow-y: auto;
        }

        #chatbot-input {
            padding: 10px;
            width: 100%;
            border: none;
            border-top: 1px solid #ddd;
        }

        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
        }

        .user-message {
            background-color: #007bff;
            color: white;
            text-align: right;
        }

        .bot-message {
            background-color: #e1e1e1;
        }

        /* Dark/Light mode toggle button */
        #theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background-color: #ffffff; /* Default light mode background */
            border: none;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            z-index: 1000;
        }

        #theme-toggle:hover {
            transform: scale(1.1);
        }

        #theme-toggle img {
            width: 24px;
            height: 24px;
            transition: filter 0.3s ease;
        }

        /* Adjust icon and button background for dark mode */
        body.dark-mode #theme-toggle {
            background-color: #121212; /* Match dark mode background */
        }

        body.dark-mode #theme-toggle img {
            filter: invert(1); /* Invert icon color for visibility */
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: #121212;
            color: #ffffff;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .hospital-card.dark-mode {
            background-color: #1e1e1e;
            border-color: #333333;
        }

        .hospital-card.dark-mode:hover {
            background-color: #2a2a2a;
        }

        .modal-content.dark-mode {
            background-color: #1e1e1e;
            color: #151515;
        }

        #chatbot-container.dark-mode {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        #chatbot-header.dark-mode {
            background-color: #333333;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body>
    <h1>Ontario Hospital Resources</h1>

    <div id="controls">
        <select id="equipment-filter">
            <option value="">All Equipment</option>
        </select>
        <input type="text" id="location-filter" placeholder="Enter location...">
    </div>

    <div id="map"></div>
    <div id="hospital-list"></div>
    <div id="no-results" class="no-results" style="display:none;">No hospitals found matching your criteria.</div>

    <div id="hospitalModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Hospital Name</h2>
            <div class="modal-map-container"></div>
            <p class="modal-address">Address:</p>
            <p class="modal-contact-info">Contact:</p>
            <p class="modal-website-link"></p>
            <h3>Website:</h3>
            <ul class="modal-website-list"></ul>
            <h3>Equipment:</h3>
            <ul class="modal-equipment-list"></ul>
            <h3>Procedures:</h3>
            <ul class="modal-procedure-list"></ul>
            <!-- Add the Read Aloud button -->
            <button id="read-aloud-button">Read Aloud</button>
        </div>
    </div>

    <!-- Chatbot Button -->
    <button id="chatbot-toggle" style="position: fixed; bottom: 20px; right: 20px; padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px;">
        Chat with us
    </button>

    <!-- Chatbot Container -->
    <div id="chatbot-container">
        <div id="chatbot-header">Hospital Info Chatbot</div>
        <div id="chatbot-messages"></div>
        <input type="text" id="chatbot-input" placeholder="Ask me about wait times, services, or parking...">
    </div>

    <!-- Add the theme toggle button -->
    <button id="theme-toggle">
        <img id="theme-icon" src="https://cdn-icons-png.flaticon.com/512/1164/1164954.png" alt="Light Mode Icon">
    </button>

    <script>
        // Sample hospital data (replace with your actual data)
        const hospitals = [
            {
                hospitalId: "1",
                name: "Toronto General Hospital",
                address: "200 Elizabeth St, Toronto, ON M5G 2C4",
                latitude: 43.6596,
                longitude: -79.3872,
                contact: "416-340-8111",
                Website: "https://www.uhn.ca/OurHospitals/TGH",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "Surgical Robot", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 5 }
                ],
                procedure: ["Cardiac Surgery", "Organ Transplants", "Neurology", "Emergency Services"]
            },
            {
                hospitalId: "2",
                name: "Ottawa Hospital - General Campus",
                address: "1053 Carling Ave, Ottawa, ON K1Y 4E9",
                latitude: 45.3912,
                longitude: -75.7219,
                contact: "613-722-7000",
                Website: "https://www.ottawahospital.on.ca/en/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "Linear Accelerator", quantity: 4 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Angiography Suite", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Cancer Treatment", "Trauma Care", "Cardiac Procedures", "Diagnostic Imaging", "Emergency Services"]
            },
            {
                hospitalId: "3",
                name: "St. Joseph's Healthcare Hamilton",
                address: "50 Charlton Ave E, Hamilton, ON L8N 4A6",
                latitude: 43.2565,
                longitude: -79.8711,
                contact: "905-522-1155",
                Website: "https://www.stjoes.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 }
                ],
                procedure: ["Mental Health Services", "Cardiac Care", "Trauma Care", "Rehabilitation"]
            },
            {
                hospitalId: "4",
                name: "Hamilton General Hospital",
                address: "237 Barton St E, Hamilton, ON L8L 2X2",
                latitude: 43.2562,
                longitude: -79.8665,
                contact: "905-527-2711",
                Website: "https://www.hamiltonhealthsciences.ca/",
                equipment: [
                    { name: "CT Scanner", quantity: 2 },
                    { name: "Angiography Suite", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 4 }
                ],
                procedure: ["Trauma Care", "Cardiac Surgery", "Stroke Treatment", "Burns Unit"]
            },
            {
                hospitalId: "5",
                name: "London Health Sciences Centre - Victoria Hospital",
                address: "800 Commissioners Rd E, London, ON N6A 5W9",
                latitude: 42.9813,
                longitude: -81.2330,
                contact: "519-685-8500",
                Website: "https://www.lhsc.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "SPECT Scanner", quantity: 1 }
                ],
                procedure: ["Children's Health", "Mental Health", "Emergency Services", "Critical Care"]
            },
            {
                hospitalId: "6",
                name: "Kingston Health Sciences Centre - Kingston General Hospital",
                address: "76 Stuart St, Kingston, ON K7L 2V7",
                latitude: 44.2323,
                longitude: -76.4891,
                contact: "613-549-6666",
                Website: "https://kingstonhsc.ca/",
                equipment: [
                    { name: "CT Scanner", quantity: 1 },
                    { name: "MRI Machine", quantity: 1 }
                ],
                procedure: ["Regional Trauma", "Neurosurgery", "Cardiac Care", "Renal Care"]
            },
            {
                hospitalId: "7",
                name: "Sunnybrook Health Sciences Centre",
                address: "2075 Bayview Ave, Toronto, ON M4N 3M5",
                latitude: 43.7245,
                longitude: -79.3713,
                contact: "416-480-6100",
                Website: "https://sunnybrook.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "Surgical Robot", quantity: 2 },
                    { name: "Linear Accelerator", quantity: 5 }
                ],
                procedure: ["Trauma Care", "Burns Unit", "Cancer Care", "Stroke Treatment", "High Risk Pregnancies"]
            },
            {
                hospitalId: "8",
                name: "St. Michael's Hospital",
                address: "30 Bond St, Toronto, ON M5B 1W8",
                latitude: 43.6534,
                longitude: -79.3771,
                contact: "416-360-4000",
                Website: "https://unityhealth.to/locations/st-michaels-hospital/",
                equipment: [
                    { name: "CT Scanner", quantity: 2 },
                    { name: "MRI Machine", quantity: 2 }
                ],
                procedure: ["Inner City Health", "Trauma Care", "Cardiovascular Care", "Neuroscience"]
            },{
                hospitalId: "9",
                name: "North York General Hospital",
                address: "550 Finch Ave W, North York, ON M2R 1N5",
                latitude: 43.7781,
                longitude: -79.4115,
                contact: "416-756-6000",
                Website: "https://www.nygh.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 }
                ],
                procedure: ["Maternal Child Health", "Seniors Care", "Emergency Services", "Mental Health"]
            },
            {
                hospitalId: "10",
                name: "Credit Valley Hospital",
                address: "2200 Eglinton Ave W, Mississauga, ON L5M 2N1",
                latitude: 43.5941,
                longitude: -79.7234,
                contact: "905-813-2200",
                Website: "https://www.thp.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 2 }
                ],
                procedure: ["Regional Cancer Care", "Emergency Services", "Maternal Child Health", "Surgical Services"]
            },
            {
                hospitalId: "11",
                name: "West Parry Sound Health Centre",
                address: "100 Parry Sound Dr, Parry Sound, ON P2A 2T1",
                latitude: 45.3444,
                longitude: -80.0384,
                contact: "705-746-9321",
                Website: "https://www.wpshc.com/",
                equipment: [
                    { name: "CT Scanner", quantity: 1 },
                    { name: "MRI Machine", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Diagnostic Imaging", "Surgical Services"]
            },
            {
                hospitalId: "12",
                name: "Temiskaming Hospital",
                address: "421 Shepherdson Rd, New Liskeard, ON P0J 1P0",
                latitude: 47.5028,
                longitude: -79.6738,
                contact: "705-647-8121",
                Website: "https://www.temiskaming-hospital.com/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation", "Long-Term Care"]
            },
            {
                hospitalId: "13",
                name: "Brightshores Health System Owen Sound",
                address: "1800 8th St E, Owen Sound, ON N4K 6M9",
                latitude: 44.5698686,
                longitude: -80.911351,
                contact: "519-376-2121",
                Website: "https://www.gbhs.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 },
                    { name: "MRI Machine", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Mental Health"]
            },
            {
                hospitalId: "14",
                name: "Hôpital de Gatineau",
                address: "909 Bd la Vérendrye O, Gatineau, QC J8P 7H2",
                latitude: 45.4933,
                longitude: -75.6912,
                contact: "819-966-6100",
                Website: "https://www.cisss-outaouais.gouv.qc.ca/",
                equipment: [
                    { name: "X-ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 },
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 }
                ],
                procedure: ["Emergency Services", "General Surgery", "Internal Medicine", "Pediatrics"]
            },
            {
                hospitalId: "15",
                name: "Hull Hospital",
                address: "116 Bd Lionel-Émond, Gatineau, QC J8Y 1W7",
                latitude: 45.4444,
                longitude: -75.7461,
                contact: "(819) 966-6200",
                Website: "https://www.cisss-outaouais.gouv.qc.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "X-ray Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Cardiology", "Neurology", "Obstetrics", "Oncology"]
            },
            {
                hospitalId: "17",
                name: "Deep River and District Hospital",
                address: "11 Allen Rd, Deep River, ON K0J 1P0",
                latitude: 46.1012,
                longitude: -77.4996,
                contact: "613-584-3333",
                Website: "https://www.drdh.org/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation"]
            },
            {
                hospitalId: "18",
                name: "Renfrew Victoria Hospital",
                address: "499 Raglan St S, Renfrew, ON K7V 1P6",
                latitude: 45.4746,
                longitude: -76.6853,
                contact: "613-432-4851",
                Website: "https://www.renfrewhosp.com/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "19",
                name: "Arnprior Regional Health",
                address: "350 John St N, Arnprior, ON K7S 3H4",
                latitude: 45.4344,
                longitude: -76.3475,
                contact: "613-623-3166",
                Website: "https://www.arnpriorregionalhealth.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "20",
                name: "Mattawa Hospital",
                address: "217 Turcotte Park Rd, Mattawa, ON P0H 1V0",
                latitude: 46.3262,
                longitude: -78.6946,
                contact: "705-744-5511",
                Website: "https://www.mattawahospital.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Long-Term Care"]
            },
            {
                hospitalId: "21",
                name: "Weeneebayko Area Health Authority - Moose Factory General Hospital",
                address: "1 Hospital Dr, Moose Factory, ON P0L 1W0",
                latitude: 51.2589,
                longitude: -80.6067,
                contact: "705-658-4544",
                Website: "https://www.waha.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Maternal Child Health", "Primary Care"]
            },
            {
                hospitalId: "22",
                name: "Lady Minto Hospital",
                address: "68 Byng St, Cochrane, ON P0L 1C0",
                latitude: 49.0747,
                longitude: -81.0211,
                contact: "705-272-5721",
                Website: "https://www.lmhosptial.com/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Long-Term Care"]
            },
            {
                hospitalId: "23",
                name: "Englehart & District Hospital",
                address: "61 5th Ave, Englehart, ON P0J 1H0",
                latitude: 47.7944,
                longitude: -79.8732,
                contact: "705-544-2301",
                Website: "https://www.engleharthospital.com/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation"]
            },
            {
                hospitalId: "24",
                name: "Blind River District Health Centre",
                address: "115 Ontario St, Blind River, ON P0R 1B0",
                latitude: 46.1883,
                longitude: -82.9555,
                contact: "705-356-2265",
                Website: "https://www.brdhc.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "25",
                name: "Manitoulin Health Centre - Little Current Site",
                address: "11 Meredith St E, Little Current, ON P0P 1K0",
                latitude: 45.9681,
                longitude: -81.9392,
                contact: "705-368-2300",
                Website: "https://www.mhc.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation"]
            },
            {
                hospitalId: "26",
                name: "North Bay Regional Health Centre",
                address: "50 College Dr, North Bay, ON P1B 5A4",
                latitude: 46.3113,
                longitude: -79.4475,
                contact: "705-474-8600",
                Website: "https://www.nbrhc.on.ca/",
                equipment: [
                    { name: "General Surgery Equipment", quantity: 1 },
                    { name: "Dental Surgery Equipment", quantity: 1 },
                    { name: "ENT Equipment", quantity: 1 },
                    { name: "Orthopedic Equipment", quantity: 1 },
                    { name: "Urology Equipment", quantity: 1 },
                    { name: "Gynecology Equipment", quantity: 1 }
                ],
                procedure: ["Outpatient Surgical Procedures"]
            },
            {
                hospitalId: "27",
                name: "Health Sciences North",
                address: "41 Ramsey Lake Rd, Sudbury, ON P3E 5J1",
                latitude: 46.4678,
                longitude: -80.9964,
                contact: "705-523-7100",
                Website: "https://www.hsnsudbury.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 2 },
                    { name: "Cardiac Care Equipment", quantity: 1 },
                    { name: "Oncology Equipment", quantity: 1 },
                    { name: "Pediatric Equipment", quantity: 1 },
                    { name: "Nephrology Equipment", quantity: 1 },
                    { name: "Trauma Equipment", quantity: 1 },
                    { name: "Rehabilitation Equipment", quantity: 1 }
                ],
                procedure: ["Ultrasound Procedures"]
            },
            {
                hospitalId: "28",
                name: "Cornwall Community Hospital",
                address: "840 McConnell Avenue, Cornwall, ON K6H 5S5",
                latitude: 45.0275,
                longitude: -74.7400,
                contact: "613-938-4240",
                Website: "https://www.cornwallhospital.ca/",
                equipment: [
                    { name: "Operating Room Equipment", quantity: 6 }
                ],
                procedure: ["Breast Surgery", "ENT Surgery", "Endoscopy", "General Surgery", "Ophthalmology", "Orthopedic Surgery", "Pediatric Dental Surgery", "Plastic Surgery"]
            },
            {
                hospitalId: "29",
                name: "Brockville General Hospital",
                address: "75 Charles Street, Brockville, ON K6V 1S8",
                latitude: 44.5900,
                longitude: -75.6825,
                contact: "613-345-5649",
                Website: "https://www.brockvillegeneralhospital.ca/",
                equipment: [
                    { name: "Operating Room Equipment", quantity: 4 }
                ],
                procedure: ["General Surgery", "Orthopedic Surgery", "Urology Surgery", "Gynecology Surgery", "Ophthalmology Surgery", "ENT Surgery", "Plastic Surgery", "Dental Surgery"]
            },
            {
                hospitalId: "30",
                name: "Alexandra Marine and General Hospital",
                address: "61 Young St, Goderich, ON N7A 1N1",
                latitude: 43.7444,
                longitude: -81.7118,
                contact: "519-524-8323",
                Website: "https://www.amgh.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Diagnostic Imaging", "Primary Care"]
            },
            {
                hospitalId: "31",
                name: "Bluewater Health",
                address: "89 Norman St, Sarnia, ON N7T 6S3",
                latitude: 42.9774,
                longitude: -82.3831,
                contact: "519-464-4400",
                Website: "https://www.bluewaterhealth.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Mental Health", "Rehabilitation"]
            },
            {
                hospitalId: "32",
                name: "Brampton Civic Hospital",
                address: "2100 Bovaird Dr E, Brampton, ON L6R 3J7",
                latitude: 43.7145,
                longitude: -79.7397,
                contact: "905-494-2120",
                Website: "https://www.williamoslerhs.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 5 },
                    { name: "Ultrasound", quantity: 3 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Pediatrics", "Surgical Services"]
            },
            {
                hospitalId: "33",
                name: "Bridgepoint Active Healthcare",
                address: "1 Bridgepoint Dr, Toronto, ON M4M 2B5",
                latitude: 43.6617,
                longitude: -79.3524,
                contact: "416-461-8252",
                Website: "https://www.bridgepointhealth.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Rehabilitation", "Chronic Disease Management", "Palliative Care"]
            },
            {
                hospitalId: "34",
                name: "Cambridge Memorial Hospital",
                address: "700 Coronation Blvd, Cambridge, ON N1R 3G3",
                latitude: 43.3768,
                longitude: -80.3243,
                contact: "519-621-2330",
                Website: "https://www.cmh.org/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Maternity Care"]
            },
            {
                hospitalId: "35",
                name: "Chatham-Kent Health Alliance",
                address: "80 Grand Ave W, Chatham, ON N7M 5L9",
                latitude: 42.3995,
                longitude: -82.1963,
                contact: "519-352-6400",
                Website: "https://www.ckha.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Surgical Services", "Rehabilitation"]
            },
            {
                hospitalId: "36",
                name: "Etobicoke General Hospital",
                address: "101 Humber College Blvd, Etobicoke, ON M9V 1R8",
                latitude: 43.7142,
                longitude: -79.5843,
                contact: "416-747-3400",
                Website: "https://www.williamoslerhs.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Maternity Care", "Cardiology", "Diagnostic Imaging"]
            },
            {
                hospitalId: "37",
                name: "Hotel Dieu Hospital",
                address: "166 Brock St, Kingston, ON K7L 5G2",
                latitude: 44.2307,
                longitude: -76.4851,
                contact: "613-544-3310",
                Website: "https://www.hoteldieu.com/",
                equipment: [
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "38",
                name: "Juravinski Hospital and Cancer Centre",
                address: "699 Concession St, Hamilton, ON L8V 5C2",
                latitude: 43.2386,
                longitude: -79.8661,
                contact: "905-387-9494",
                Website: "https://www.hamiltonhealthsciences.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "Linear Accelerator", quantity: 3 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Cancer Treatment", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "39",
                name: "Listowel Memorial Hospital",
                address: "250 Main St E, Listowel, ON N4W 2B8",
                latitude: 43.7382,
                longitude: -80.9385,
                contact: "519-291-3120",
                Website: "https://www.lmhospital.org/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "40",
                name: "Lakeridge Health Ajax Pickering",
                address: "1 Hospital Ct, Ajax, ON L1S 2L8",
                latitude: 43.8569,
                longitude: -79.0347,
                contact: "905-683-3334",
                Website: "https://www.lakeridgehealth.on.ca/",
                equipment: [
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "41",
                name: "Lakeridge Health Bowmanville",
                address: "4700 King St E, Bowmanville, ON L1C 2T2",
                latitude: 43.9142,
                longitude: -78.6139,
                contact: "905-623-3331",
                Website: "https://www.lakeridgehealth.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "42",
                name: "Lakeridge Health Port Perry",
                address: "550 Paxton St, Port Perry, ON L9L 1L9",
                latitude: 44.1039,
                longitude: -78.9481,
                contact: "905-985-7321",
                Website: "https://www.lakeridgehealth.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "43",
                name: "Lakeridge Health Whitby",
                address: "300 Gordon St, Whitby, ON L1N 5T2",
                latitude: 43.8752,
                longitude: -78.9422,
                contact: "905-571-3000",
                Website: "https://www.lakeridgehealth.on.ca/",
                equipment: [
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "44",
                name: "Mackenzie Health",
                address: "10 Trench St, Richmond Hill, ON L4C 4Z3",
                latitude: 43.8767,
                longitude: -79.4371,
                contact: "905-883-1212",
                Website: "https://www.mackenziehealth.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 5 },
                    { name: "Ultrasound", quantity: 3 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "45",
                name: "McMaster Children's Hospital",
                address: "1200 Main St E, Hamilton, ON L8N 3Z5",
                latitude: 43.2522,
                longitude: -79.8661,
                contact: "905-521-2100",
                Website: "https://www.hamiltonhealthsciences.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Pediatric Care", "Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "46",
                name: "McMaster University Medical Centre",
                address: "1200 Main St E, Hamilton, ON L8N 3Z5",
                latitude: 43.2522,
                longitude: -79.8661,
                contact: "905-521-2100",
                Website: "https://www.hamiltonhealthsciences.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Neurology", "Surgical Services"]
            },
            {
                hospitalId: "47",
                name: "Mount Forest Family Health Team",
                address: "118 Queen St W, Mount Forest, ON N0G 2L2",
                latitude: 43.9632,
                longitude: -80.7578,
                contact: "519-323-2210",
                Website: "https://www.mountforestfht.com/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Primary Care", "Diagnostic Imaging", "Rehabilitation"]
            },
            {
                hospitalId: "48",
                name: "Muskoka Algonquin Healthcare",
                address: "Huntsville District Memorial Hospital Site, 100 Frank Miller Dr, Huntsville, ON P1H 1H7",
                latitude: 45.3323,
                longitude: -79.2274,
                contact: "705-789-2311",
                Website: "https://www.mahc.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "49",
                name: "Niagara Health",
                address: "1200 Fourth Ave, St. Catharines, ON L2S 0A9",
                latitude: 43.1627,
                longitude: -79.2642,
                contact: "905-378-4647",
                Website: "https://www.niagarahealth.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 4 },
                    { name: "X-Ray Machine", quantity: 8 },
                    { name: "Ultrasound", quantity: 5 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Cancer Treatment", "Surgical Services"]
            },
            {
                hospitalId: "50",
                name: "Orillia Soldiers' Memorial Hospital",
                address: "100 Memorial Ave, Orillia, ON L3V 2E7",
                latitude: 44.6091,
                longitude: -79.4172,
                contact: "705-325-2201",
                Website: "https://www.osmh.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "51",
                name: "Princess Margaret Cancer Centre",
                address: "610 University Ave, Toronto, ON M5G 2M9",
                latitude: 43.6599,
                longitude: -79.3904,
                contact: "416-946-2000",
                Website: "https://www.uhn.ca/OurHospitals/PrincessMargaret",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "Linear Accelerator", quantity: 6 },
                    { name: "CT Scanner", quantity: 5 },
                    { name: "X-Ray Machine", quantity: 7 },
                    { name: "Ultrasound", quantity: 3 }
                ],
                procedure: ["Cancer Treatment", "Radiation Therapy", "Diagnostic Imaging"]
            },
            {
                hospitalId: "52",
                name: "Providence Healthcare",
                address: "3276 St Clair Ave E, Scarborough, ON M1L 1W1",
                latitude: 43.7259,
                longitude: -79.2884,
                contact: "416-285-3666",
                Website: "https://www.providence.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Rehabilitation", "Palliative Care", "Primary Care"]
            },
            {
                hospitalId: "53",
                name: "Queensway Carleton Hospital",
                address: "3045 Baseline Rd, Nepean, ON K2H 8P4",
                latitude: 45.3275,
                longitude: -75.8368,
                contact: "613-721-2000",
                Website: "https://www.qch.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "54",
                name: "Rouge Valley Health System",
                address: "2867 Ellesmere Rd, Scarborough, ON M1E 4B9",
                latitude: 43.7695,
                longitude: -79.1972,
                contact: "416-438-2911",
                Website: "https://www.rvh.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "55",
                name: "Scarborough Health Network",
                address: "3050 Lawrence Ave E, Scarborough, ON M1P 2V5",
                latitude: 43.7681,
                longitude: -79.2562,
                contact: "416-438-8211",
                Website: "https://www.shn.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 4 },
                    { name: "X-Ray Machine", quantity: 8 },
                    { name: "Ultrasound", quantity: 5 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "56",
                name: "Sinai Health System",
                address: "600 University Ave, Toronto, ON M5G 1X5",
                latitude: 43.6575,
                longitude: -79.3912,
                contact: "416-596-4200",
                Website: "https://www.sinaihealth.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 4 },
                    { name: "X-Ray Machine", quantity: 6 },
                    { name: "Ultrasound", quantity: 4 },
                    { name: "Linear Accelerator", quantity: 2 }
                ],
                procedure: ["Maternity Care", "Oncology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "57",
                name: "Southlake Regional Health Centre",
                address: "596 Davis Dr, Newmarket, ON L3Y 2P9",
                latitude: 44.0416,
                longitude: -79.4674,
                contact: "905-895-4521",
                Website: "https://www.southlakeregional.org/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 3 }
                ],
                procedure: ["Cardiology", "Cancer Care", "Emergency Services", "Surgical Services"]
            },
            {
                hospitalId: "58",
                name: "St. Joseph's Health Care London",
                address: "268 Grosvenor St, London, ON N6A 4V2",
                latitude: 42.9839,
                longitude: -81.2514,
                contact: "519-646-6000",
                Website: "https://www.sjhc.london.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 3 }
                ],
                procedure: ["Rehabilitation", "Mental Health", "Diagnostic Imaging", "Surgical Services"]
            },
            {
                hospitalId: "59",
                name: "St. Joseph's Health Centre",
                address: "30 The Queensway, Toronto, ON M6R 1B5",
                latitude: 43.6393,
                longitude: -79.4442,
                contact: "416-530-6000",
                Website: "https://www.stjoestoronto.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Surgical Services", "Primary Care"]
            },
            {
                hospitalId: "60",
                name: "St. Mary's General Hospital",
                address: "911 Queen's Blvd, Kitchener, ON N2M 1B2",
                latitude: 43.4542,
                longitude: -80.4746,
                contact: "519-744-3311",
                Website: "https://www.smgh.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Cardiology", "Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "61",
                name: "St. Peter's Hospital",
                address: "88 Maplewood Ave, Hamilton, ON L8M 1W9",
                latitude: 43.2307,
                longitude: -79.8398,
                contact: "905-549-6525",
                Website: "https://www.hamiltonhealthsciences.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Palliative Care", "Rehabilitation", "Primary Care"]
            },
            {
                hospitalId: "62",
                name: "Timmins and District Hospital",
                address: "700 Ross Ave E, Timmins, ON P4N 8P2",
                latitude: 48.4716,
                longitude: -81.3197,
                contact: "705-267-2131",
                Website: "https://www.tadh.com/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Primary Care"]
            },
            {
                hospitalId: "63",
                name: "Toronto Rehabilitation Institute",
                address: "550 University Ave, Toronto, ON M5G 2A2",
                latitude: 43.6599,
                longitude: -79.3904,
                contact: "416-597-3422",
                Website: "https://www.uhn.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Rehabilitation", "Chronic Disease Management", "Primary Care"]
            },
            {
                hospitalId: "64",
                name: "Toronto Western Hospital",
                address: "399 Bathurst St, Toronto, ON M5T 2S8",
                latitude: 43.6534,
                longitude: -79.4042,
                contact: "416-603-2581",
                Website: "https://www.uhn.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 4 },
                    { name: "X-Ray Machine", quantity: 6 },
                    { name: "Ultrasound", quantity: 4 }
                ],
                procedure: ["Emergency Services", "Neurology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "65",
                name: "Trillium Health Partners",
                address: "100 Queensway W, Mississauga, ON L5B 1B8",
                latitude: 43.5898,
                longitude: -79.6457,
                contact: "905-848-7100",
                Website: "https://www.thp.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 4 },
                    { name: "CT Scanner", quantity: 6 },
                    { name: "X-Ray Machine", quantity: 10 },
                    { name: "Ultrasound", quantity: 6 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Cancer Care", "Surgical Services"]
            },
            {
                hospitalId: "66",
                name: "Unity Health Toronto",
                address: "30 Bond St, Toronto, ON M5B 1W8",
                latitude: 43.6543,
                longitude: -79.3765,
                contact: "416-864-6000",
                Website: "https://www.unityhealth.to/",
                equipment: [
                    { name: "MRI Machine", quantity: 4 },
                    { name: "CT Scanner", quantity: 6 },
                    { name: "X-Ray Machine", quantity: 10 },
                    { name: "Ultrasound", quantity: 6 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Primary Care"]
            },
            {
                hospitalId: "67",
                name: "University Health Network",
                address: "190 Elizabeth St, Toronto, ON M5G 2C4",
                latitude: 43.6599,
                longitude: -79.3879,
                contact: "416-340-4800",
                Website: "https://www.uhn.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 5 },
                    { name: "CT Scanner", quantity: 7 },
                    { name: "X-Ray Machine", quantity: 12 },
                    { name: "Ultrasound", quantity: 7 },
                    { name: "Linear Accelerator", quantity: 3 }
                ],
                procedure: ["Cancer Care", "Neurology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "68",
                name: "William Osler Health System",
                address: "2100 Bovaird Dr E, Brampton, ON L6R 3J7",
                latitude: 43.7145,
                longitude: -79.7397,
                contact: "905-494-2120",
                Website: "https://www.williamoslerhs.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 4 },
                    { name: "X-Ray Machine", quantity: 8 },
                    { name: "Ultrasound", quantity: 4 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "69",
                name: "Windsor Regional Hospital",
                address: "1995 Lens Ave, Windsor, ON N8W 1L9",
                latitude: 42.2818,
                longitude: -83.0039,
                contact: "519-254-5577",
                Website: "https://www.wrh.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 4 },
                    { name: "X-Ray Machine", quantity: 6 },
                    { name: "Ultrasound", quantity: 4 },
                    { name: "Linear Accelerator", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Cancer Care", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "70",
                name: "Grand River Hospital",
                address: "835 King St W, Kitchener, ON N2G 1G3",
                latitude: 43.4516,
                longitude: -80.4974,
                contact: "519-749-4300",
                Website: "https://www.grhosp.on.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 4 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Cancer Care", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "71",
                name: "Humber River Hospital",
                address: "1235 Wilson Ave, North York, ON M3M 0B2",
                latitude: 43.7184,
                longitude: -79.4901,
                contact: "416-242-1000",
                Website: "https://www.hrh.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 4 },
                    { name: "X-Ray Machine", quantity: 6 },
                    { name: "Ultrasound", quantity: 3 }
                ],
                procedure: ["Emergency Services", "Cardiology", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "72",
                name: "Markham Stouffville Hospital",
                address: "381 Church St, Markham, ON L3P 7P3",
                latitude: 43.8765,
                longitude: -79.2633,
                contact: "905-472-7000",
                Website: "https://www.oakvalleyhealth.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "X-Ray Machine", quantity: 3 },
                    { name: "Ultrasound", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Maternity Care", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "73",
                name: "Northumberland Hills Hospital",
                address: "1000 DePalma Dr, Cobourg, ON K9A 5W6",
                latitude: 43.9594,
                longitude: -78.1673,
                contact: "905-372-6811",
                Website: "https://www.nhh.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Rehabilitation"]
            },
            {
                hospitalId: "74",
                name: "Pembroke Regional Hospital",
                address: "705 Mackay St, Pembroke, ON K8A 1G8",
                latitude: 45.8267,
                longitude: -77.1108,
                contact: "613-732-2811",
                Website: "https://www.pembrokeregionalhospital.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Rehabilitation"]
            },
            {
                hospitalId: "75",
                name: "Ross Memorial Hospital",
                address: "10 Angeline St N, Lindsay, ON K9V 4M8",  latitude: 44.3573,
                longitude: -78.7406,
                contact: "705-324-6111",
                Website: "https://www.rmh.org/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Rehabilitation"]
            },
            {
                hospitalId: "76",
                name: "South Bruce Grey Health Centre",
                address: "21 McGivern St W, Walkerton, ON N0G 2V0",
                latitude: 44.1314,
                longitude: -81.1523,
                contact: "519-881-1220",
                Website: "https://www.sbghc.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "77",
                name: "Stratford General Hospital",
                address: "46 General Hospital Dr, Stratford, ON N5A 2Y6",
                latitude: 43.3700,
                longitude: -80.9819,
                contact: "519-271-2120",
                Website: "https://www.hpha.ca/",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Rehabilitation"]
            },
            {
                hospitalId: "78",
                name: "Tillsonburg District Memorial Hospital",
                address: "167 Rolph St, Tillsonburg, ON N4G 3Y9",
                latitude: 42.8656,
                longitude: -80.7327,
                contact: "519-842-3611",
                Website: "https://www.tillsonburghospital.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "79",
                name: "West Lincoln Memorial Hospital",
                address: "169 Main St E, Grimsby, ON L3M 1P3",
                latitude: 43.1957,
                longitude: -79.5583,
                contact: "905-945-2253",
                Website: "https://www.niagarahealth.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "80",
                name: "Glengarry Memorial Hospital",
                address: "20260 County Rd 43, Alexandria, ON K0C 1A0",
                latitude: 45.3056, 
                longitude: -74.6440,
                contact: "613-525-2222",
                website: "http://www.hgmh.on.ca/",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 },
                    { name: "CT Scanner", quantity: 1 },
                    { name: "MRI Machine", quantity: 1 },
                    { name: "Pool", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            }
        ];

        const map = L.map('map').setView([43.651070, -79.347015], 7);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        const hospitalListElement = document.getElementById('hospital-list');
        const equipmentFilter = document.getElementById('equipment-filter');
        const locationFilter = document.getElementById('location-filter');
        const noResultsMessage = document.getElementById('no-results');
        const modal = document.getElementById('hospitalModal');
        const modalClose = document.querySelector('.close');

        let activeMarker = null; // Keep track of the active marker

        function createHospitalCard(hospital) {
            const card = document.createElement('div');
            card.className = 'hospital-card';
            card.innerHTML = `
                <h2>${hospital.name}</h2>
                <p>Address: ${hospital.address}</p>
                <p>Contact: ${hospital.contact}</p>
                <button data-hospital-id="${hospital.hospitalId}">View Details</button>
            `;
            const viewDetailsButton = card.querySelector('button');
            viewDetailsButton.addEventListener('click', () => showHospitalDetails(hospital.hospitalId));
            return card;
        }

        function updateHospitalList(filteredHospitals) {
            hospitalListElement.innerHTML = '';
            if (filteredHospitals.length === 0) {
                noResultsMessage.style.display = 'block';
            } else {
                noResultsMessage.style.display = 'none';
                filteredHospitals.forEach(hospital => {
                    hospitalListElement.appendChild(createHospitalCard(hospital));
                });
            }
        }

        function updateMap(filteredHospitals) {
            // Remove existing markers
            map.eachLayer(layer => {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });

            // Add markers for filtered hospitals
            filteredHospitals.forEach(hospital => {
                const marker = L.marker([hospital.latitude, hospital.longitude])
                    .addTo(map)
                    .bindPopup(`<b>${hospital.name}</b><br>${hospital.address}`);
                marker.on('click', () => showHospitalDetails(hospital.hospitalId)); // Show details on marker click
            });
        }

        function filterHospitals() {
            const selectedEquipment = equipmentFilter.value;
            const location = locationFilter.value.toLowerCase();

            let filteredHospitals = hospitals;

            if (selectedEquipment) {
                filteredHospitals = filteredHospitals.filter(hospital =>
                    hospital.equipment.some(item => item.name === selectedEquipment)
                );
            }

            if (location) {
                filteredHospitals = filteredHospitals.filter(hospital =>
                    hospital.address.toLowerCase().includes(location) || hospital.name.toLowerCase().includes(location)
                );
            }

            updateHospitalList(filteredHospitals);
            updateMap(filteredHospitals);
        }

        // Populate equipment filter
        const equipmentOptions = [...new Set(hospitals.flatMap(hospital => hospital.equipment.map(item => item.name)))];
        equipmentOptions.forEach(equipment => {
            const option = document.createElement('option');
            option.value = equipment;
            option.textContent = equipment;
            equipmentFilter.appendChild(option);
        });

        // Event listeners for filtering
        equipmentFilter.addEventListener('change', filterHospitals);
        locationFilter.addEventListener('input', filterHospitals);

        // Initial display
        filterHospitals();

        function showHospitalDetails(hospitalId) {
            const hospital = hospitals.find(h => h.hospitalId === hospitalId);
            if (!hospital) return;

            modal.style.display = "block";
            const modalContent = document.querySelector('.modal-content');
            const hospitalNameElement = modalContent.querySelector('h2');
            hospitalNameElement.textContent = hospital.name;
            hospitalNameElement.dataset.hospitalId = hospitalId; // Store the hospitalId for TTS

            modalContent.querySelector('.modal-address').textContent = `Address: ${hospital.address}`;
            modalContent.querySelector('.modal-contact-info').textContent = `Contact: ${hospital.contact}`;

            // Clear and populate equipment list
            const equipmentList = modalContent.querySelector('.modal-equipment-list');
            equipmentList.innerHTML = '';
            hospital.equipment.forEach(item => {
                const li = document.createElement('li');
                li.textContent = `${item.name}: ${item.quantity}`;
                equipmentList.appendChild(li);
            });

            // Clear and populate procedure list
            const procedureList = modalContent.querySelector('.modal-procedure-list');
            procedureList.innerHTML = '';
            hospital.procedure.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                procedureList.appendChild(li);
            });

            // Add website link
            const websiteLink = modalContent.querySelector('.modal-website-link');
            if (hospital.Website) {
                websiteLink.innerHTML = `<a href="${hospital.Website}" target="_blank">${hospital.Website}</a>`;
            } else {
                websiteLink.textContent = "No website available.";
            }

            // Update modal map
            const modalMapContainer = modalContent.querySelector('.modal-map-container');
            if (modalMapContainer._leaflet_map) {
                modalMapContainer._leaflet_map.remove();
            }
            const modalMap = L.map(modalMapContainer).setView([hospital.latitude, hospital.longitude], 15);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(modalMap);
            L.marker([hospital.latitude, hospital.longitude]).addTo(modalMap).bindPopup(hospital.name);
            modalMapContainer._leaflet_map = modalMap;
        }

        function stopSpeech() {
            if (window.speechSynthesis.speaking) {
                const utterance = new SpeechSynthesisUtterance(""); // Empty utterance
                window.speechSynthesis.speak(utterance); // Speak the empty utterance
                window.speechSynthesis.cancel(); // Cancel the speech
            }
        }

        modalClose.onclick = function() {
            modal.style.display = "none";
            stopSpeech();
        };

        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = "none";
                stopSpeech();
            }
        };

        function readAloud(hospital) {
            if (!window.speechSynthesis) {
                alert("Text-to-Speech is not supported in this browser.");
                return;
            }

            // Generate the text content to read aloud
            const text = `
                Hospital Name: ${hospital.name}.
                Address: ${hospital.address}.
                Contact: ${hospital.contact}.
                Available Equipment: ${hospital.equipment.map(item => `${item.name} (${item.quantity})`).join(", ")}.
                Procedures offered: ${hospital.procedure.join(", ")}.
            `;

            // Create a new SpeechSynthesisUtterance instance
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = "en-US"; // Set the language
            utterance.rate = 1; // Set the speaking rate (1 is normal speed)

            // Speak the text
            window.speechSynthesis.speak(utterance);
        }
        // Add event listener for the "Read Aloud" button
        document.getElementById("read-aloud-button").addEventListener("click", () => {
            const hospitalId = document.querySelector(".modal-content h2").dataset.hospitalId;
            const hospital = hospitals.find(h => h.hospitalId === hospitalId);
            if (hospital) {
                readAloud(hospital);
            }
        });

        // Chatbot functionality
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotContainer = document.getElementById('chatbot-container');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input');

        // Toggle chatbot visibility
        chatbotToggle.addEventListener('click', () => {
            chatbotContainer.style.display = chatbotContainer.style.display === 'none' ? 'block' : 'none';
            if (!chatbotMessages.dataset.initialized) {
                chatbotMessages.innerHTML = `<div class="message bot-message">Hello! Ask me about hospital wait times, services, or parking prices in Ontario.</div>`;
                chatbotMessages.dataset.initialized = true; // Mark as initialized
            }
        });

        // Handle user input
        chatbotInput.addEventListener('keydown', async (e) => {
            if (e.key === 'Enter' && chatbotInput.value.trim() !== '') {
                const userMessage = chatbotInput.value.trim();
                chatbotMessages.innerHTML += `<div class="message user-message">${userMessage}</div>`;
                chatbotInput.value = '';
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

                // Send the user query to the server
                const botResponse = await fetchChatResponse(userMessage);
                chatbotMessages.innerHTML += `<div class="message bot-message">${botResponse}</div>`;
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            }
        });

        // Fetch response from the server
        async function fetchChatResponse(query) {
            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            { role: 'system', content: 'You are a helpful assistant providing information about hospitals in Ontario.' },
                            { role: 'user', content: query }
                        ],
                        max_tokens: 150
                    })
                });

                if (!response.ok) {
                    throw new Error(`Error: ${response.status}`);
                }

                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching chat response:', error);
                return 'Sorry, I am having trouble connecting to the server. Please try again later.';
            }
        }

        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const body = document.body;

        // Check for saved theme preference in localStorage
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            body.classList.add('dark-mode');
            themeIcon.src = 'https://cdn-icons-png.flaticon.com/512/1164/1164946.png'; // Moon icon
        }

        // Toggle theme on button click
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');

            // Update the icon and button background dynamically
            themeIcon.src = isDarkMode
                ? 'https://cdn-icons-png.flaticon.com/512/1164/1164946.png' // Moon icon
                : 'https://cdn-icons-png.flaticon.com/512/1164/1164954.png'; // Sun icon
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        });
    </script>
</body>
</html>