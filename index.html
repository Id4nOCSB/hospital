<!DOCTYPE html>
<html>
<head>
    <title>Ontario Hospital Resources</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Basic CSS styling */
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
        }

        h1 {
            text-align: center;
            margin: 20px 0;
        }

        #controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        #controls select,
        #controls input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
            margin: 5px;
        }

        #controls select {
            width: 250px;
        }

        #controls input {
            width: 300px;
        }

        #map {
            height: 500px;
            width: 100%;
        }

        .hospital-card {
            border: 1px solid #ccc;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
            transition: background-color 0.3s ease;
        }

        .hospital-card:hover {
            background-color: #f0f0f0;
        }

        #hospital-list {
            max-width: 800px;
            margin: 0 auto;
        }

        .no-results {
            text-align: center;
            padding: 20px;
            font-size: 1.2em;
            color: #555;
        }

        @media (max-width: 600px) {
            #controls {
                flex-direction: column;
                align-items: stretch;
            }

            #controls select,
            #controls input {
                width: 100%;
                max-width: 300px;
            }
        }

        /* Style for the modal */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 90%; /* Could be more or less, depending on screen size */
            max-width: 600px;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
          from {opacity: 0;}
          to {opacity: 1;}
        }

        /* The Close Button */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 15px;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
        }

        .modal-equipment-list {
            list-style-type: none;
            padding: 0;
            margin-bottom: 15px;
        }

        .modal-equipment-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .modal-equipment-list li:last-child {
            border-bottom: none;
        }
        .modal-procedure-list {
            list-style-type: none;
            padding: 0;
            margin-bottom: 15px;
        }

        .modal-procedure-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .modal-procedure-list li:last-child {
            border-bottom: none;
           
        }
        

        .modal-map-container {
            height: 300px;
            width: 100%;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .modal-contact-info {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .modal-website-link {
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body>
    <h1>Ontario Hospital Resources</h1>

    <div id="controls">
        <select id="equipment-filter">
            <option value="">All Equipment</option>
        </select>
        <input type="text" id="location-filter" placeholder="Enter location...">
    </div>

    <div id="map"></div>
    <div id="hospital-list"></div>
     <div id="no-results" class="no-results" style="display:none;">No hospitals found matching your criteria.</div>

    <div id="hospitalModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Hospital Name</h2>
            <div class="modal-map-container"></div>
            <p class="modal-address">Address:</p>
            <p class="modal-contact-info">Contact:</p>
            <p class="modal-website-link"></p>
            <h3>website:</h3>
            <ul class="modal-website-list">
            </ul>
            <h3>Equipment:</h3>
            <ul class="modal-equipment-list">
            </ul>
            <h3>Procedures:</h3>
             <ul class="modal-procedure-list">
             </ul>
        </div>
    </div>

    <script>
       // Sample hospital data (replace with your actual data)
        const hospitals = [
            {
                hospitalId: "1",
                name: "Toronto General Hospital",
                address: "200 Elizabeth St, Toronto, ON M5G 2C4",
                latitude: 43.6596,
                longitude: -79.3872,
                contact: "416-340-8111",
                Website: "https://www.uhn.ca/OurHospitals/TGH",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "CT Scanner", quantity: 2 },
                    { name: "Surgical Robot", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 5 }
                ],
                procedure: ["Cardiac Surgery", "Organ Transplants", "Neurology", "Emergency Services"]
            },
            {
                hospitalId: "2",
                name: "Ottawa Hospital - General Campus",
                address: "1053 Carling Ave, Ottawa, ON K1Y 4E9",
                latitude: 45.3912,
                longitude: -75.7219,
                contact: "613-722-7000",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "Linear Accelerator", quantity: 4 },
                    { name: "CT Scanner", quantity: 3 },
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Angiography Suite", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Cancer Treatment", "Trauma Care", "Cardiac Procedures", "Diagnostic Imaging", "Emergency Services"]
            },
            {
                hospitalId: "3",
                name: "Mount Sinai Hospital",
                address: "600 University Ave, Toronto, ON M5G 1X5",
                latitude: 43.6579,
                longitude: -79.3915,
                contact: "416-596-4200",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "PET Scanner", quantity: 1 },
                    { name: "Surgical Robot", quantity: 2 }
                ],
                procedure: ["High-Risk Obstetrics", "Complex Surgery", "Geriatric Care", "Cancer Care"]
            },
            {
                hospitalId: "4",
                name: "Hamilton General Hospital",
                address: "237 Barton St E, Hamilton, ON L8L 2X2",
                latitude: 43.2562,
                longitude: -79.8665,
                contact: "905-527-2711",
                equipment: [
                    { name: "CT Scanner", quantity: 2 },
                    { name: "Angiography Suite", quantity: 1 },
                    { name: "X-Ray Machine", quantity: 4 }
                ],
                procedure: ["Trauma Care", "Cardiac Surgery", "Stroke Treatment", "Burns Unit"]
            },
            {
                hospitalId: "5",
                name: "London Health Sciences Centre - Victoria Hospital",
                address: "800 Commissioners Rd E, London, ON N6A 5W9",
                latitude: 42.9813,
                longitude: -81.2330,
                contact: "519-685-8500",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "SPECT Scanner", quantity: 1 }
                ],
                procedure: ["Children's Health", "Mental Health", "Emergency Services", "Critical Care"]
            },
            {
                hospitalId: "6",
                name: "Kingston Health Sciences Centre - Kingston General Hospital",
                address: "76 Stuart St, Kingston, ON K7L 2V7",
                latitude: 44.2323,
                longitude: -76.4891,
                contact: "613-549-6666",
                equipment: [
                    { name: "CT Scanner", quantity: 1 },
                    { name: "MRI Machine", quantity: 1 }
                ],
                procedure: ["Regional Trauma", "Neurosurgery", "Cardiac Care", "Renal Care"]
            },
            {
                hospitalId: "7",
                name: "Sunnybrook Health Sciences Centre",
                address: "2075 Bayview Ave, Toronto, ON M4N 3M5",
                latitude: 43.7245,
                longitude: -79.3713,
                contact: "416-480-6100",
                equipment: [
                    { name: "MRI Machine", quantity: 3 },
                    { name: "Surgical Robot", quantity: 2 },
                    { name: "Linear Accelerator", quantity: 5 }
                ],
                procedure: ["Trauma Care", "Burns Unit", "Cancer Care", "Stroke Treatment", "High Risk Pregnancies"]
            },
            {
                hospitalId: "8",
                name: "St. Michael's Hospital",
                address: "30 Bond St, Toronto, ON M5B 1W8",
                latitude: 43.6534,
                longitude: -79.3771,
                contact: "416-360-4000",
                equipment: [
                    { name: "CT Scanner", quantity: 2 },
                    { name: "MRI Machine", quantity: 2 }
                ],
                procedure: ["Inner City Health", "Trauma Care", "Cardiovascular Care", "Neuroscience"]
            },
            {
                hospitalId: "9",
                name: "North York General Hospital",
                address: "550 Finch Ave W, North York, ON M2R 1N5",
                latitude: 43.7781,
                longitude: -79.4115,
                contact: "416-756-6000",
                equipment: [
                    { name: "MRI Machine", quantity: 1 },
                    { name: "CT Scanner", quantity: 2 }
                ],
                procedure: ["Maternal Child Health", "Seniors Care", "Emergency Services", "Mental Health"]
            },
            {
                hospitalId: "10",
                name: "Credit Valley Hospital",
                address: "2200 Eglinton Ave W, Mississauga, ON L5M 2N1",
                latitude: 43.5941,
                longitude: -79.7234,
                contact: "905-813-2200",
                equipment: [
                    { name: "MRI", quantity: 2 },
                    { name: "CT Scanner", quantity: 2 }
                ],
                procedure: ["Regional Cancer Care", "Emergency Services", "Maternal Child Health", "Surgical Services"]
            },
            {
                hospitalId: "27",
                name: "West Parry Sound Health Centre",
                address: "100 Parry Sound Dr, Parry Sound, ON P2A 2T1",
                latitude: 45.3444,
                longitude: -80.0384,
                contact: "705-746-9321",
                equipment: [
                    { name: "CT Scanner", quantity: 1 },
                    { name: "MRI Machine", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Diagnostic Imaging", "Surgical Services"]
            },
            {
                hospitalId: "28",
                name: "Temiskaming Hospital",
                address: "421 Shepherdson Rd, New Liskeard, ON P0J 1P0",
                latitude: 47.5028,
                longitude: -79.6738,
                contact: "705-647-8121",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation", "Long-Term Care"]
            },
            {
                hospitalId: "29",
                name: "Brightshores Health system Owen Sound",
                address: "1800 8th St E, Owen Sound, ON N4K 6M9",
                latitude: 44.5698686,
                longitude: -80.911351,
                contact: "519-376-2121",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 },
                    { name: "MRI", quantity: 2 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging", "Mental Health"]
            },
            {
                hospitalId: "30",
                name: "Hôpital de Gatineau",
                address: "909 Bd la Vérendrye O, Gatineau, QC J8P 7H2",
                latitude: 45.4933,
                longitude: 75.6912,
                contact: "819-966-6100",
                equipment: [
                    { name: "X-ray Machine", quantity: 1},
                    { name: "Ultrasound", quantity: 1},
                    { name: "MRI", quantity: 1},
                    { name: "CT Scanner", quantity: 1}
                ],
                procedure: ["Emergency Services", "General Surgery", "Internal Medicine", "Pediatrics"]
            },
            {
                hospitalId: "31",
                name: "Hull Hospital",
                address: "116 Bd Lionel-Émond, Gatineau, QC J8Y 1W7",
                latitude: 45.4444,
                longitude: 75.7461,
                contact: "(819) 966-6200",
                equipment: [
                    {name:"MRI", quantity: 1},
                    {name:"X-ray Machine", quantity: 1},
                    {name:"CT Scanner", quantity: 1},
                    {name:"Ultrasound", quantity: 1}
                ],
                procedure: ["Cardiology", "Neurology", "Obstetrics", "Oncology"]
            },
            {
                hospitalId: "32",
                name: "Muskoka Algonquin Healthcare - Huntsville District Memorial Hospital Site",
                address: "100 Frank Miller Dr, Huntsville, ON P1H 1H3",
                latitude: 45.3346,
                longitude: -79.2155,
                contact: "705-789-2311",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "General Surgery", "Diagnostic Imaging"]
            },
            {
                hospitalId: "33",
                name: "Deep River and District Hospital",
                address: "11 Allen Rd, Deep River, ON K0J 1P0",
                latitude: 46.1012,
                longitude: -77.4996,
                contact: "613-584-3333",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation"]
            },
            {
                hospitalId: "34",
                name: "Renfrew Victoria Hospital",
                address: "499 Raglan St S, Renfrew, ON K7V 1P6",
                latitude: 45.4746,
                longitude: -76.6853,
                contact: "613-432-4851",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Surgical Services", "Diagnostic Imaging"]
            },
            {
                hospitalId: "35",
                name: "Arnprior Regional Health",
                address: "350 John St N, Arnprior, ON K7S 3H4",
                latitude: 45.4344,
                longitude: -76.3475,
                contact: "613-623-3166",
                equipment: [
                    { name: "X-Ray Machine", quantity: 2 },
                    { name: "CT Scanner", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "36",
                name: "Mattawa Hospital",
                address: "217 Turcotte Park Rd, Mattawa, ON P0H 1V0",
                latitude: 46.3262,
                longitude: -78.6946,
                contact: "705-744-5511",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Long-Term Care"]
            },
            {
                hospitalId: "37",
                name: "Weeneebayko Area Health Authority - Moose Factory General Hospital",
                address: "1 Hospital Dr, Moose Factory, ON P0L 1W0",
                latitude: 51.2589,
                longitude: -80.6067,
                contact: "705-658-4544",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Maternal Child Health", "Primary Care"]
            },
            {
                hospitalId: "38",
                name: "Lady Minto Hospital",
                address: "68 Byng St, Cochrane, ON P0L 1C0",
                latitude: 49.0747,
                longitude: -81.0211,
                contact: "705-272-5721",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Long-Term Care"]
            },
            {
                hospitalId: "39",
                name: "Englehart & District Hospital",
                address: "61 5th Ave, Englehart, ON P0J 1H0",
                latitude: 47.7944,
                longitude: -79.8732,
                contact: "705-544-2301",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation"]
            },
            {
                hospitalId: "40",
                name: "Blind River District Health Centre",
                address: "115 Ontario St, Blind River, ON P0R 1B0",
                latitude: 46.1883,
                longitude: -82.9555,
                contact: "705-356-2265",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Ultrasound", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Acute Care", "Diagnostic Imaging"]
            },
            {
                hospitalId: "41",
                name: "Manitoulin Health Centre - Little Current Site",
                address: "11 Meredith St E, Little Current, ON P0P 1K0",
                latitude: 45.9681,
                longitude: -81.9392,
                contact: "705-368-2300",
                equipment: [
                    { name: "X-Ray Machine", quantity: 1 },
                    { name: "Laboratory Services", quantity: 1 }
                ],
                procedure: ["Emergency Services", "Primary Care", "Rehabilitation"]
            },
            {
                hospitalId: "42",
                name: "North Bay Regional Health Centre",
                address: "50 College Dr, North Bay, ON P1B 5A4",
                latitude: 46.3113,
                longitude: -79.4475,
                contact: "705-474-8600",
                equipment: [
                    { name: "General Surgery Equipment", quantity: 1 },
                    { name: "Dental Surgery Equipment", quantity: 1 },
                    { name: "ENT Equipment", quantity: 1 },
                    { name: "Orthopedic Equipment", quantity: 1 },
                    { name: "Urology Equipment", quantity: 1 },
                    { name: "Gynecology Equipment", quantity: 1 }
                ],
                procedure: ["Outpatient Surgical Procedures"]
            },
            {
                hospitalId: "43",
                name: "Health Sciences North",
                address: "41 Ramsey Lake Rd, Sudbury, ON P3E 5J1",
                latitude: 46.4678,
                longitude: -80.9964,
                contact: "705-523-7100",
                equipment: [
                    { name: "MRI Machine", quantity: 2 },
                    { name: "Ultrasound", quantity: 2 },
                    { name: "Cardiac Care Equipment", quantity: 1 },
                    { name: "Oncology Equipment", quantity: 1 },
                    { name: "Pediatric Equipment", quantity: 1 },
                    { name: "Nephrology Equipment", quantity: 1 },
                    { name: "Trauma Equipment", quantity: 1 },
                    { name: "Rehabilitation Equipment", quantity: 1 }
                ],
                procedure: ["Ultrasound Procedures"]
            },
            {
                hospitalId: "44",
                name: "Cornwall Community Hospital",
                address: "840 McConnell Avenue, Cornwall, ON K6H 5S5",
                latitude: 45.0275,
                longitude: -74.7400,
                contact: "613-938-4240",
                equipment: [
                    { name: "Operating Room Equipment", quantity: 6 }
                ],
                procedure: ["Breast Surgery", "ENT Surgery", "Endoscopy", "General Surgery", "Ophthalmology", "Orthopedic Surgery", "Pediatric Dental Surgery", "Plastic Surgery",
    // ... (Your existing hospital data) ...

                ]
            },
            {
                hospitalId: "45",
                name: "Brockville General Hospital",
                address: "75 Charles Street, Brockville, ON K6V 1S8",
                latitude: 44.5900,
                longitude: -75.6825,
                contact: "613-345-5649",
                equipment: [
                    { name: "Operating Room Equipment", quantity: 4 }
                ],
                procedure: ["General Surgery", "Orthopedic Surgery", "Urology Surgery", "Gynecology Surgery", "Ophthalmology Surgery", "ENT Surgery", "Plastic Surgery", "Dental Surgery",]
            }
        ]


        const map = L.map('map').setView([43.651070, -79.347015], 7);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);


        const hospitalListElement = document.getElementById('hospital-list');
        const equipmentFilter = document.getElementById('equipment-filter');
        const locationFilter = document.getElementById('location-filter');
        const noResultsMessage = document.getElementById('no-results');
        const modal = document.getElementById('hospitalModal');
        const modalClose = document.querySelector('.close');


        let activeMarker = null; // Keep track of the active marker


        function createHospitalCard(hospital) {
            const card = document.createElement('div');
            card.className = 'hospital-card';
            card.innerHTML = `
                <h2>${hospital.name}</h2>
                <p>Address: ${hospital.address}</p>
                 <p>Contact: ${hospital.contact}</p>
                <button data-hospital-id="${hospital.hospitalId}">View Details</button>
            `;
            const viewDetailsButton = card.querySelector('button');
            viewDetailsButton.addEventListener('click', () => showHospitalDetails(hospital.hospitalId));
            return card;
        }

        function updateHospitalList(filteredHospitals) {
            hospitalListElement.innerHTML = '';
            if (filteredHospitals.length === 0) {
                noResultsMessage.style.display = 'block';
            } else {
                noResultsMessage.style.display = 'none';
                filteredHospitals.forEach(hospital => {
                    hospitalListElement.appendChild(createHospitalCard(hospital));
                });
            }
        }

        function updateMap(filteredHospitals) {
            map.eachLayer(layer => {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });

            filteredHospitals.forEach(hospital => {
                const marker = L.marker([hospital.latitude, hospital.longitude])
                    .addTo(map)
                    .bindPopup(`<b>${hospital.name}</b><br>${hospital.address}`);
                marker.on('click', () => showHospitalDetails(hospital.hospitalId)); //show details on marker click
            });
        }



        function filterHospitals() {
            const selectedEquipment = equipmentFilter.value;
            const location = locationFilter.value.toLowerCase();

            let filteredHospitals = hospitals;

            if (selectedEquipment) {
                filteredHospitals = filteredHospitals.filter(hospital =>
                    hospital.equipment.some(item => item.name === selectedEquipment)
                );
            }

            if (location) {
                filteredHospitals = filteredHospitals.filter(hospital =>
                    hospital.address.toLowerCase().includes(location) || hospital.name.toLowerCase().includes(location)
                );
            }

            updateHospitalList(filteredHospitals);
            updateMap(filteredHospitals);
        }

        // Populate equipment filter
        const equipmentOptions = [...new Set(hospitals.flatMap(hospital => hospital.equipment.map(item => item.name)))];
        equipmentOptions.forEach(equipment => {
            const option = document.createElement('option');
            option.value = equipment;
            option.textContent = equipment;
            equipmentFilter.appendChild(option);
        });

        // Event listeners for filtering
        equipmentFilter.addEventListener('change', filterHospitals);
        locationFilter.addEventListener('input', filterHospitals);

        // Initial display
        filterHospitals();



        function showHospitalDetails(hospitalId) {
            const hospital = hospitals.find(h => h.hospitalId === hospitalId);
            if (!hospital) return;

            modal.style.display = "block";
            const modalContent = document.querySelector('.modal-content');
            modalContent.querySelector('h2').textContent = hospital.name;
            modalContent.querySelector('.modal-address').textContent = `Address: ${hospital.address}`;
            modalContent.querySelector('.modal-contact-info').textContent = `Contact: ${hospital.contact}`;

            // Clear previous equipment list
            const equipmentList = modalContent.querySelector('.modal-equipment-list');
            equipmentList.innerHTML = '';
            hospital.equipment.forEach(item => {
                const li = document.createElement('li');
                li.textContent = `${item.name}: ${item.quantity}`;
                equipmentList.appendChild(li);
            });

            // Clear previous procedure list
            const procedureList = modalContent.querySelector('.modal-procedure-list');
            procedureList.innerHTML = '';
            if (hospital.procedure && hospital.procedure.length > 0) {
                hospital.procedure.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    procedureList.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.textContent = "No procedures available.";
                procedureList.appendChild(li);
            }

            // Add website link
            const websiteLink = modalContent.querySelector('.modal-website-link');
            if (hospital.Website) {
                websiteLink.innerHTML = `<a href="${hospital.Website}" target="_blank">${hospital.Website}</a>`;
            } else {
                websiteLink.textContent = "No website available.";
            }

            // Update map
            const modalMapContainer = modalContent.querySelector('.modal-map-container');
            if (modalMapContainer._leaflet_map) {
                modalMapContainer._leaflet_map.remove();
            }
            const modalMap = L.map(modalMapContainer).setView([hospital.latitude, hospital.longitude], 15);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(modalMap);
            L.marker([hospital.latitude, hospital.longitude]).addTo(modalMap).bindPopup(hospital.name);

            if (activeMarker) {
                activeMarker.closePopup();
            }
        }

        modalClose.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
